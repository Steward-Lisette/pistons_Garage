<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- ADDED: make layout safe for modern mobile devices (iOS safe-area) -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Garage – Professional Auto Repair</title>

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
/* ---------- ADDED: Cross-device consistency helpers ---------- */
/* Prevent iOS text auto-size and improve font rendering */
html {
  -webkit-text-size-adjust: 100%; /* stop iOS from auto-resizing text */
  -ms-text-size-adjust: 100%;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Fluid/clamped base font-size so spacing remains proportional across widths */
  font-size: clamp(14px, calc(13px + 0.8vw), 18px); /* ADDED: fluid but clamped */
  box-sizing: border-box;
  height: 100%;
  background: var(--soft); /* keep background stable even before body loads */
}

/* ensure all elements inherit box-sizing */
*, *::before, *::after { box-sizing: inherit; }

/* prevent horizontal overflow which can rearrange layouts on small devices */
body {
  margin: 0;
  min-width: 320px; /* ADDED: safe minimum width for very small devices */
  overflow-x: hidden; /* ADDED: prevent horizontal scroll and layout shifts */
  -webkit-overflow-scrolling: touch;
}

/* make images and media predictable */
img, picture, svg, video {
  max-width: 100%;
  height: auto;
  display: block;
}

/* ---------- Original (kept) + small adjustments for hero slideshow ---------- */
:root{
  --brand-dark:#5c0f0f;
  --brand:#8e1a1a;
  --brand-2:#d43116;
  --ink:#1f2937;
  --muted:#6b7280;
  --paper:#ffffff;
  --soft:#f4f6fb;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0}

body{
  font-family:"Montserrat",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  color:var(--ink);
  background:var(--soft);
  display:flex;
  justify-content:center;
  align-items:flex-start;
}

/* page frame */
.page-wrapper{
  width:100%;
  max-width:1400px;
  background:var(--paper);
  border:20px solid var(--brand-dark);
  border-radius:30px;
  overflow:hidden;
  min-height:100vh;
  /* ADDED: ensure transform/scaling origin is stable on different screens */
  transform-origin: top center;
}

/* top mini bar */
.topbar{display:flex;align-items:center;justify-content:space-between;padding:10px 20px;background:#f8fafc;border-bottom:1px solid #e5e7eb;font-size:12px;color:#334155}
.topbar a{color:#334155;text-decoration:none}

/* header */
header{position:sticky;top:0;background:#ffffff;z-index:40;border-bottom:1px solid #e5e7eb}
.nav {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 30px;
  padding: 15px 24px;
  background: rgba(17, 17, 17, 0.6);
  z-index: 1000;
  backdrop-filter: blur(4px);
  max-width: none;
  margin: 0 auto;
}
.brand{
  display:flex;
  align-items:center;
  gap:10px;
  font-weight:800;
  font-size: 34px;
  color:#ffffff;
  margin-right:auto;
}
.brand .logo-img{
  height:48px;
  width:auto;
  display:block;
}
nav{margin-left:auto;display:flex;gap:22px}
nav a{font-weight:600;color:#ffffff;text-decoration:none}
nav a:hover{color:#d43116}
.cta{margin-left:12px;background:var(--brand-2);color:#fff;border:none;border-radius:999px;padding:10px 16px;font-weight:700;cursor:pointer}
.hamb{display:none}

/* HERO: now uses multiple overlapped bg slides */
.hero{
  position:relative;
  min-height:420px;
  overflow:hidden;
}
.hero .hero-slides{
  position:absolute;
  inset:0;
  z-index:0;
  display:block;
  pointer-events:auto;
}
.hero .hero-slide{
  position:absolute;
  inset:0;
  background-position:center;
  background-size:cover;
  background-repeat:no-repeat;
  opacity:0;
  transform:scale(1.02);
  transition:opacity 1100ms ease, transform 1200ms cubic-bezier(.2,.9,.3,1);
  will-change:opacity, transform;
}
.hero .hero-slide.active{
  opacity:1;
  transform:scale(1);
  z-index:0;
}

/* subtle parallax on mouse move (applied to active slide only) */
.hero .hero-slide.active[data-offset-x]{
  transition: transform 650ms cubic-bezier(.2,.9,.3,1);
}

/* dark overlay for legibility */
.hero .overlay{
  position:absolute;
  inset:0;
  z-index:1;
  background:linear-gradient(to bottom, rgba(0,0,0,.45), rgba(0,0,0,.35));
  pointer-events:none;
}

/* hero content sits above overlays */
.hero .content{
  position:relative;
  z-index:2;
  display:grid;
  place-items:center;
  text-align:center;
  padding:32px 24px;
  min-height:520px;
}
.hero h1{color:#fff;font-weight:800;font-size:42px;letter-spacing:.5px;line-height:1.15;margin:0 0 14px}
.hero .kicker{font-size:11px;letter-spacing:4px;color:#e5e7eb;font-weight:600;margin-bottom:8px}
.hero .btn{background:var(--brand-2);color:#fff;border:none;border-radius:999px;padding:12px 18px;font-weight:700;cursor:pointer}

/* services (kept) */
.services-strip{position:relative;max-width:940px;margin:-60px auto 40px;display:grid;grid-template-columns:repeat(3,1fr);gap:18px;z-index:20}
.svc{background:#fff;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,.15);overflow:hidden}
.svc img{display:block;width:100%;height:200px;object-fit:cover}
.svc .pad{padding:14px}
.svc h4{margin:0 0 6px;font-size:14px;font-weight:800}
.svc p{margin:0;color:#6b7280;font-size:12px;line-height:1.5}
.svc .learn{display:inline-block;margin-top:10px;font-size:12px;color:var(--brand-2);font-weight:700;text-decoration:none}

/* about */
.about{padding:36px 26px 8px;max-width:960px;margin:0 auto;display:grid;grid-template-columns:1.1fr .9fr;gap:36px;align-items:center}
.diamonds{position:relative;height:220px}
.diamond{position:absolute;width:120px;height:120px;transform:rotate(45deg);border-radius:10px;overflow:hidden;box-shadow:0 12px 24px rgba(0,0,0,.18)}
.diamond:nth-child(1){left:16px;top:60px;background:#ff5a3c}
.diamond:nth-child(2){left:86px;top:-10px}
.diamond:nth-child(3){left:158px;top:62px}
.diamond:nth-child(4){left:230px;top:134px;background:#ff5a3c}
.diamond img{width:100%;height:100%;object-fit:cover;transform:rotate(-45deg) scale(1.2)}
.about h3{margin:0 0 12px;color:var(--brand-2);font-size:18px;letter-spacing:2px;font-weight:800}
.about h2{margin:0 0 12px;font-size:26px;line-height:1.3}
.about p{margin:0 0 14px;color:#6b7280;font-size:14px}
.stats{display:flex;gap:18px;margin-top:14px}
.stat{flex:1;background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:16px;text-align:center}
.stat b{display:block;font-size:26px}
.stat span{font-size:11px;color:#64748b;text-transform:uppercase;letter-spacing:1px}

/* features */
.features{max-width:960px;margin:12px auto 48px;padding:0 26px}
.features h3{text-align:center;margin:8px 0 18px;font-size:20px}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
.feat{background:#fff;border:1px solid #eef2f7;border-radius:12px;padding:14px;display:flex;gap:12px;align-items:flex-start}
.bullet{flex:0 0 22px;height:22px;border-radius:999px;background:#ffeadb;display:grid;place-items:center;font-weight:800;color:var(--brand-2)}
.feat b{display:block;margin-bottom:4px}
.feat p{margin:0;color:#6b7280;font-size:12px;line-height:1.5}

/* banner */
.banner{position:relative;overflow:hidden;margin:0 26px 40px}
.banner img{width:100%;height:425px;object-fit:cover;display:block;filter:saturate(.98)}
.banner .cover{position:absolute;inset:0;background:linear-gradient(to bottom, rgba(0,0,0,.25), rgba(0,0,0,.55))}
.banner h2{position:absolute;inset:0;display:grid;place-items:center;margin:0;color:#fff;font-size:26px;letter-spacing:.3px;text-align:center}

/* ------- About title + banner about-text styles ------- */

/* simple title above the banner */
.section-title-wrap{
  max-width:1400px;
  margin: 22px auto 6px;
  padding: 0 20px;
}
.section-title{
  font-weight:900;
  font-size:22px;
  text-align: center;
  letter-spacing:1px;
  color:var(--brand-2);
  margin:8px 0 18px;
}

/* container holding two paragraphs that sit on top of the banner */
.about-banner-content{
  position:absolute;
  inset:0;
  z-index:3; /* above overlay */
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:24px;
  padding:36px 48px;
  pointer-events:none; /* decorative text only (if you want clicks enable pointer-events) */
}

/* left/right paragraphs */
.about-banner-content .about-left,
.about-banner-content .about-right{
  width:48%;
  font-weight:800;         /* bold for visibility */
  color:#fff;
  font-size:15px;
  line-height:1.5;
  text-shadow: 0 6px 20px rgba(0,0,0,0.55);
  background: linear-gradient(180deg, rgba(0,0,0,0.18), rgba(0,0,0,0.12));
  padding:16px;
  border-radius:12px;
  box-shadow: 0 12px 30px rgba(2,6,23,0.45);
  opacity:0;
  transform: translateY(22px) scale(.995);
  transition: opacity 520ms cubic-bezier(.2,.9,.3,1), transform 520ms cubic-bezier(.2,.9,.3,1);
}

/* reveal state when scrolled into view */
.about-banner-content.visible .about-left,
.about-banner-content.visible .about-right{
  opacity:1;
  transform: translateY(0) scale(1);
}

/* responsive: stack paragraphs on small screens */
@media (max-width: 900px){
  .about-banner-content{
    flex-direction:column;
    align-items:stretch;
    padding:18px;
  }
  .about-banner-content .about-left,
  .about-banner-content .about-right{
    width:100%;
    font-size:14px;
    margin-bottom:12px;
  }
}


/* footer */
.credit{padding:24px 0 28px;text-align:center;color:#e2e8f0;background:var(--brand);font-weight:600;letter-spacing:2px}

/* responsive adjustments */
@media (max-width: 900px){
  .services-strip{grid-template-columns:1fr; margin-top:-60px}
  .about{grid-template-columns:1fr;}
  nav{display:none}
  .hamb{display:inline-flex;margin-left:auto}

  .hero .content{padding:20px 14px; min-height:300px}
  .hero h1{font-size:28px}
}
/* ===== Our Services modal + cards CSS (paste after existing styles) ===== */
.services-modal {
  position: fixed;
  inset: 0;
  z-index: 2000;
  display: none; /* shown when .open is added */
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(6px) brightness(.7);
  -webkit-backdrop-filter: blur(6px) brightness(.7);
}
.services-modal.open { display:flex; }

/* background layer (blurred image) */
.services-modal .bg-layer{
  position:absolute;
  inset:0;
  background-image: url('https://images.unsplash.com/photo-1525609004556-c46c7d6cf023?q=80&w=1800&auto=format&fit=crop');
  background-size:cover;
  background-position:center;
  opacity:0.28;
  filter: blur(4px) saturate(.9);
  transform: scale(1.02);
  pointer-events:none;
}

/* dark overlay to improve contrast */
.services-modal .overlay{
  position:absolute; inset:0;
  background:rgba(0,0,0,0.42);
  pointer-events:none;
}

/* modal window */
.services-modal .modal-window{
  position:relative;
  width: min(1100px, 94%);
  max-height: 86vh;
  overflow: hidden;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02));
  border-radius: 18px;
  box-shadow: 0 30px 80px rgba(2,6,23,0.6);
  z-index: 2;
  display:flex;
  flex-direction:column;
  border: 1px solid rgba(255,255,255,0.04);
}

/* modal header */
.services-modal .modal-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:18px 20px;
  gap:12px;
  border-bottom:1px solid rgba(255,255,255,0.03);
}
.services-modal .modal-head h3{ margin:0;color:#fff;font-size:18px;font-weight:800; }
.services-modal .close-btn{ background:transparent;border:0;color:#fff;font-size:20px;padding:8px;border-radius:10px;cursor:pointer; }

/* modal body: grid of cards */
.services-modal .modal-body{
  padding:18px;
  overflow:auto;
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:14px;
  align-items:start;
  scroll-behavior:smooth;
}

/* service card (collapsed) */
.service-card{
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:14px;
  overflow:hidden;
  position:relative;
  min-height:160px;
  cursor:pointer;
  transition: transform .28s cubic-bezier(.2,.9,.3,1), box-shadow .28s ease;
  border:1px solid rgba(255,255,255,0.03);
  display:flex;
  flex-direction:column;
}
.service-card:hover { transform: translateY(-8px) scale(1.01); box-shadow: 0 20px 40px rgba(2,6,23,0.45); }

/* thumbnail area */
.service-card .svc-img{ height:110px; background-size:cover; background-position:center; flex-shrink:0; }

/* text */
.service-card .svc-content{ padding:12px; color:#fff; }
.service-card .svc-title{ font-weight:800; font-size:14px; margin:0 0 6px; color:#fff; }
.service-card .svc-short{ font-size:12px; color:rgba(255,255,255,0.85); line-height:1.25; }

/* expanded card — becomes large, spans grid */
.service-card.expanded{
  z-index:50;
  transform:scale(1.02);
  box-shadow: 0 40px 80px rgba(2,6,23,0.7);
  grid-column: 1 / -1;
  display:flex;
  min-height:420px;
  flex-direction:row;
  gap:14px;
  padding:14px;
  border-radius:16px;
}
.service-card.expanded .svc-img{ flex:0 0 46%; height:auto; border-radius:10px; overflow:hidden; }
.service-card.expanded .svc-content{ flex:1; padding:18px; display:flex; flex-direction:column; justify-content:center; }
.service-card .svc-desc{ margin-top:8px; color:rgba(255,255,255,0.9); font-size:14px; line-height:1.5; }

/* spacer so expanded card can occupy full row visually */
.services-modal .modal-body .spacer { height:0; }

/* modal footer hint */
.services-modal .modal-foot{
  padding:12px 18px;
  border-top:1px solid rgba(255,255,255,0.03);
  color:rgba(255,255,255,0.75);
  font-size:13px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  background:transparent;
}

/* responsive */
@media (max-width:980px){
  .services-modal .modal-body { grid-template-columns: repeat(2, 1fr); }
  .service-card.expanded { flex-direction:column; }
  .service-card.expanded .svc-img { flex:0 0 100%; height:220px; }
}
@media (max-width:640px){
  .services-modal .modal-body { grid-template-columns: 1fr; }
}

/* accessibility helper */
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}

/* Footer Contact Section - Modern Dynamic Style */
.footer-contact {
  background: var(--brand-dark);
  color: #fff;
  text-align: center;
  padding: 40px 20px;
  border-top: 2px solid var(--brand-2);
}

.footer-contact h3 {
  font-size: 26px;
  font-weight: 900;
  margin-bottom: 8px;
  color: var(--brand-2);
}

.footer-contact p {
  font-size: 16px;
  margin-bottom: 24px;
  color: #ccc;
}

.footer-contact .contact-links {
  display: flex;
  justify-content: center;
  gap: 20px;
  flex-wrap: wrap;
}

.footer-contact .contact-link {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 60px;
  height: 60px;
  background: rgba(255,255,255,0.08);
  border-radius: 50%;
  transition: all 0.3s ease;
}

.footer-contact .contact-link img {
  width: 28px;
  height: 28px;
  filter: invert(100%) brightness(1.2);
  transition: transform 0.3s ease;
}

.footer-contact .contact-link:hover {
  background: var(--brand-2);
  transform: translateY(-5px);
}

.footer-contact .contact-link:hover img {
  transform: scale(1.2) rotate(10deg);
}

/* Tooltip */
.footer-contact .contact-link .tooltip {
  position: absolute;
  bottom: 70px;
  left: 50%;
  transform: translateX(-50%) scale(0);
  background: var(--brand-2);
  color: #fff;
  padding: 6px 12px;
  border-radius: 4px;
  font-size: 13px;
  font-weight: 600;
  white-space: nowrap;
  pointer-events: none;
  transition: all 0.3s ease;
}

.footer-contact .contact-link:hover .tooltip {
  transform: translateX(-50%) scale(1);
}

/* Responsive adjustments */
@media (max-width: 600px){
  .footer-contact .contact-links {
    gap: 14px;
  }

  .footer-contact h3 {
    font-size: 22px;
  }
}

  </style>
</head>
<body>
  <div class="page-wrapper">
    <!-- top bar -->


    <!-- header -->
    <header>
      <div class="nav">
        <a class="brand" href="#"
  ><img src="images/piston.jpg" alt="Garage Logo" class="logo-img"><span>PISTONS AUTO GARAGE</span></a>
        <nav aria-label="primary">
          <a href="#home">Home</a>
          <a id="nav-ourservices" href="#services" aria-haspopup="dialog">Our Services</a>
          <a href="#banner">About</a>
          <a href="#contacts">Contact Us</a>

        </nav>

        <button class="hamb" aria-label="Menu">☰</button>
      </div>
    </header>

    <!-- hero with background slideshow -->
    <section class="hero" id="home" aria-roledescription="hero">
      <div class="hero-slides" id="heroSlides" aria-hidden="true">
        <!-- JS will populate these slides for flexibility -->
      </div>

      <div class="overlay"></div>

      <div class="content">
        <div>
          <div class="kicker">PERFECTION</div>
          <h1>GIVE YOUR CAR A<br/>TRUE CUSTOM LOOK.</h1>
          <button class="btn">Our Services</button>
        </div>
      </div>
    </section>

    <!-- services -->
    <div class="services-strip" id="services">
      <article class="svc">
        <img src="images/s.jpg" alt="">
        <div class="pad"><h4>Engine Diagnostics</h4><p>Fast scans and precise fixes.</p></div>
      </article>
      <article class="svc">
        <img src="images/t.jpg" alt="">
        <div class="pad"><h4>Oil Change </h4><p>OEM materials, quick turnaround.</p></div>
      </article>
      <article class="svc">
        <img src="images/n.jpg" alt="">
        <div class="pad"><h4>Filter Replacement</h4><p>Alignment & premium tires.</p></div>
      </article>
    </div>

    <!-- about -->
    <section class="about" id="about">
      <div class="diamonds" aria-hidden="true">
        <div class="diamond"><img src="images/Cars/bmwlogo1.webp"></div>
        <div class="diamond"><img src="images/Cars/porchelogo.jpg"></div>
        <div class="diamond"><img src="images/Cars/benzlogo2.jpg"></div>
        <div class="diamond"><img src="images/Cars/audiilogo.webp"></div>
      </div>
      <div>
        <h3>WHO WE ARE</h3>
        <h2>We are a Global Standard Garage for Local Auto Care</h2>
        <p>At our automotive garage, we fully appreciate how difficult it is for people to find reliable and trustworthy garages where they can service and repair their cars.</p>
        <div class="stats">
          <div class="stat"><b class="count" data-target="25">0</b><span>Dealers Served</span></div>
          <div class="stat"><b class="count" data-target="4">0</b><span>Branches</span></div>
        </div>
      </div>
    </section>

    <!-- features -->
    <section class="features">
      <h3>Auto Repair Services</h3>
      <div class="grid">
        <div class="feat"><div class="bullet">✓</div><div><b>Qualified testers</b><p>Core trained experts.</p></div></div>
        <div class="feat"><div class="bullet">✓</div><div><b>Unbeatable savings</b><p>Transparent pricing always.</p></div></div>
        <div class="feat"><div class="bullet">✓</div><div><b>Genuine spare parts</b><p>OEM components guaranteed.</p></div></div>
      </div>
    </section>

<section class="banner" id="banner">
  <img src="images/Cars/audiilogo2.jpg" alt="Garage banner">
  <div class="cover"></div>

  <!-- About Us heading at top center -->


  <!-- About text content: left and right columns -->
  <div class="about-banner-content">
    <div class="about-left">
      <h1 class="about-us-heading">About Us</h1>
      <h3>Our Story: The Global Standard for Local Auto Care</h3>
      <p>Pistons Auto Garage was founded on the belief that every great vehicle deserves great expertise, regardless of its country of origin. We recognized that most garages only master one or two makes, leaving drivers of mixed fleets or varied collections searching for reliable, comprehensive service.</p>
      <p>That's where we step in. We have invested in the specialized training, tools, and technical data necessary to become genuine experts across a wide range of vehicle engineering philosophies — so your car gets the specialist care it deserves.</p>
    </div>
    <div class="about-right">
      <p><strong>German Precision:</strong> From complex engine timing to sophisticated chassis control.</p>
      <p><strong>European Performance:</strong> Mastering the mechanical and electrical nuances of the continent's diverse brands.</p>
      <p><strong>American Power:</strong> Expert maintenance and repair for rugged, high-performance engines and platforms.</p>
      <p><strong>Japanese Reliability:</strong> Deep knowledge of intricate electrical systems and fuel-efficient mechanical design.</p>
      <p>Our certified technicians excel in all facets of vehicle health—from detailed mechanical repairs and complex electrical troubleshooting to accurate, efficient diagnostics. When you choose Pistons Auto Garage, you're not choosing a generalist; you're choosing a specialist who understands the Global Standard for your specific vehicle.</p>
    </div>
  </div>
</section>


<!-- Footer Contact Section -->
<section class="footer-contact" id="contacts">
  <h3>Contact Us</h3>
  <p>Reach us through any of these platforms:</p>
  <div class="contact-links">
    <a href="mailto:info@pistonsgarage.com" target="_blank" class="contact-link" aria-label="Email">
      <img src="images/email.webp" alt="Email">
      <span class="tooltip">Email</span>
    </a>
    <a href="tel:+254708107945" class="contact-link" aria-label="Call Us">
      <img src="images/phone.webp" alt="Phone">
      <span class="tooltip">Phone</span>
    </a>
    <a href="https://wa.me/254708107945" target="_blank" class="contact-link" aria-label="WhatsApp">
      <img src="images/whats2.webp" alt="WhatsApp">
      <span class="tooltip">WhatsApp</span>
    </a>
    <a href="https://www.instagram.com/pistons870?utm_source=qr&igsh=MXFtc2prdXVOZXo4ZQ==" target="_blank" class="contact-link" aria-label="Instagram">
      <img src="images/instagram.webp" alt="Instagram">
      <span class="tooltip">Instagram</span>
    </a>
    <a href="https://www.facebook.com/share/1B7ZFRwYCT/" target="_blank" class="contact-link" aria-label="Facebook">
      <img src="images/facebook.webp" alt="Facebook">
      <span class="tooltip">Facebook</span>
    </a>
    <a href="https://twitter.com/pistonsgarage" target="_blank" class="contact-link" aria-label="Twitter">
      <img src="images/twitter.webp" alt="Twitter">
      <span class="tooltip">Twitter</span>
    </a>
  </div>
</section>



  <!-- ===== Full-screen Services Modal (Option A) ===== -->
  <div class="services-modal" id="servicesModal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="servicesTitle">
    <div class="bg-layer" aria-hidden="true"></div>
    <div class="overlay" aria-hidden="true"></div>

    <div class="modal-window" role="document">
      <div class="modal-head">
        <h3 id="servicesTitle">Pistons Garage — Our Services</h3>
        <div style="display:flex;gap:12px;align-items:center">
          <div style="color:rgba(255,255,255,0.7);font-size:13px">Click a card to expand & read more</div>
          <button class="close-btn" id="modalClose" aria-label="Close services dialog">✕</button>
        </div>
      </div>

      <div class="modal-body" id="modalBody" tabindex="0">
        <!-- JS will populate 9 service cards here -->
      </div>

      <div class="modal-foot">
        <div>Need a custom job? <strong>Call us:</strong> +254700754298</div>
        <div style="opacity:.85">Esc to close • Click outside to dismiss</div>
      </div>
    </div>
  </div>

  <script>
/* ===== counters (your code) ===== */
const counters = document.querySelectorAll('.count');

const animate = (el) => {
  const target = +el.dataset.target;
  let n = 0;
  const step = Math.max(1, Math.round(target / 60));

  const tick = () => {
    n += step;
    if (n >= target) {
      el.textContent = target;
    } else {
      el.textContent = n;
      requestAnimationFrame(tick);
    }
  };
  tick();
};

const io = new IntersectionObserver(
  (entries) => {
    entries.forEach((e) => {
      if (e.isIntersecting) {
        animate(e.target);
        io.unobserve(e.target);
      }
    });
  },
  { threshold: 0.6 }
);

counters.forEach((c) => io.observe(c));


/* ===== HERO BACKGROUND SLIDESHOW =====
   - 8 images (Unsplash by default)
   - changeIntervalMs controls timing (set 5000 for 5s, 7000 for 7s)
   - gentle crossfade + subtle parallax on mouse move
*/
(function() {
  const slideImages = [
    'images/cars/Range.avif',
    'images/cars/Auddi.jpg',
    'images/cars/BMWbig.jpg',
    'images/cars/benz.jpg',
    'images/cars/Vw1.jpg',
    'images/cars/Gle2.jpg',
    'images/cars/BMW.jpg',
    'images/cars/Auddi3.webp',
    'images/cars/GLE.jpg'
    
  ];

  const heroSlidesContainer = document.getElementById('heroSlides');
  const hero = document.querySelector('.hero');

  // timing: set to 6000ms by default. Change to 5000 or 7000 as you prefer.
  let changeIntervalMs = 4500;

  // Preload images & create slide elements
  const slides = slideImages.map((src, idx) => {
    const d = document.createElement('div');
    d.className = 'hero-slide';
    d.style.backgroundImage = `url("${src}")`;
    d.setAttribute('data-index', idx);
    heroSlidesContainer.appendChild(d);

    // preload
    const img = new Image();
    img.src = src;

    return d;
  });

  let current = 0;
  slides[current].classList.add('active');

  // crossfade to next slide
  function showNext() {
    const next = (current + 1) % slides.length;
    slides[next].classList.add('active');
    // allow previous to fade out; remove active on previous after transition
    slides[current].classList.remove('active');
    current = next;
  }

  // auto play
  let timer = setInterval(showNext, changeIntervalMs);

  // pause on hover/focus (keeps hero interactive)
  hero.addEventListener('mouseenter', () => clearInterval(timer));
  hero.addEventListener('mouseleave', () => {
    clearInterval(timer);
    timer = setInterval(showNext, changeIntervalMs);
  });

  // optional: allow left/right arrow to change background quickly
  document.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowLeft') {
      // prev
      clearInterval(timer);
      const prev = (current - 1 + slides.length) % slides.length;
      slides[prev].classList.add('active');
      slides[current].classList.remove('active');
      current = prev;
      timer = setInterval(showNext, changeIntervalMs);
    } else if (e.key === 'ArrowRight') {
      clearInterval(timer);
      showNext();
      timer = setInterval(showNext, changeIntervalMs);
    }
  });

  // subtle interactive parallax: move background slightly by pointer
  hero.addEventListener('pointermove', (ev) => {
    // compute offset from center - small values for subtlety
    const rect = hero.getBoundingClientRect();
    const x = (ev.clientX - rect.left) / rect.width - 0.5; // -0.5 .. 0.5
    const y = (ev.clientY - rect.top) / rect.height - 0.5;
    // apply transform to active slide only
    slides.forEach((s, i) => {
      if (s.classList.contains('active')) {
        const tx = x * 6; // tweak multipliers for effect strength
        const ty = y * 4;
        s.style.transform = `translate3d(${tx}px, ${ty}px, 0) scale(1)`;
      } else {
        s.style.transform = '';
      }
    });
  });

  // reset transform when pointer leaves
  hero.addEventListener('pointerleave', () => {
    slides.forEach(s => s.style.transform = '');
  });

  // expose a method to change interval in dev console if desired:
  window.__heroSlideshow = {
    setIntervalMs: (ms) => {
      changeIntervalMs = ms;
      clearInterval(timer);
      timer = setInterval(showNext, changeIntervalMs);
      return changeIntervalMs;
    },
    goTo: (i) => {
      if (i >= 0 && i < slides.length) {
        clearInterval(timer);
        slides.forEach(s => s.classList.remove('active'));
        slides[i].classList.add('active');
        current = i;
        timer = setInterval(showNext, changeIntervalMs);
      }
    }
  };

})();
/* ===== Our Services modal JS (binds to #nav-ourservices and .btn if present) ===== */
(function(){
  const services = [
    { id:'s1', title:'Engine Diagnostics', img:'images/engine diagnosis.avif', short:'Mechanics use computerized diagnostic scanners to read error codes from the engine control unit (ECU).', desc:'They identify problems such as poor fuel combustion, overheating, oil leaks, or unusual engine noises. The service includes inspecting engine components and making the necessary repairs or replacements to restore engine performance.'},
    { id:'s2', title:'Oil & Filter Service', img:'images/Oilchange.jpg', short:'OEM oil & fast fitment', desc:'The garage drains old, dirty engine oil and replaces it with fresh oil suited to your vehicle. They also change the oil filter, check other fluid levels, and lubricate moving parts. This service reduces friction inside the engine, prevents wear, and helps the car run more efficiently and last longer.'},
    { id:'s3', title:'Brake Service', img:'images/brake incpection.jpg', short:'Pads, discs, fluid & ABS checks', desc:'Technicians examine brake pads, discs (rotors), brake lines, and fluid levels. Worn brake pads are replaced, discs may be resurfaced or changed, and brake fluid can be topped up or flushed. Proper brake servicing ensures the car stops safely, prevents accidents, and improves overall driving control.'},
    { id:'s4', title:'Wheel Alignment & Balancing', img:'images/wheelalignment.jpg', short:'Precision alignment', desc:'Wheel alignment involves adjusting the angles of the wheels so they meet the road evenly. Poor alignment causes uneven tire wear and pulls the vehicle to one side. Balancing removes vibrations by evenly distributing weight around the wheel. These services improve steering stability, prolong tire life, and enhance road safety.'},
    { id:'s5', title:'Tyre Replacement & Repair', img:'images/tire replacement.webp', short:'Premium tyres fitted onsite', desc:'Garages repair punctures, fill slow leaks, rotate tires, or replace old, worn-out tires. Tires with poor tread can reduce road grip and increase the risk of accidents, especially on wet or rough roads. Proper tire care ensures better braking, fuel efficiency, and overall vehicle safety'},
    { id:'s6', title:'AC Repair & Service', img:'images/aircondition.webp', short:'Climate control diagnostics', desc:'Technicians check the refrigerant level, look for leaks, clean the condenser, and test the compressor. They then recharge the system if needed. This service helps maintain proper cooling inside the car and prevents A/C failure during hot weather.'},
    { id:'s7', title:'Electrical System Diagnosis', img:'images/Electrical.jpg', short:'Manual & automatic care', desc:'Modern cars rely heavily on electronics. Garages check wiring, fuses, sensors, lights, dashboard indicators, ignition systems, and onboard computers. They troubleshoot electrical faults like non-working headlights, faulty sensors, or dashboard warning lights to ensure all systems function correctly.'},
    { id:'s8', title:'Transmission service Repair ', img:'images/transmissioning.webp', short:'Charging system & battery checks', desc:'The transmission controls how power is delivered from the engine to the wheels. Mechanics inspect transmission fluid, gears, and clutch components (for manual vehicles). They may change the transmission fluid, fix leaks, or repair shifting problems. Proper transmission care prevents breakdowns and keeps gear changes smooth.'},
    { id:'s9', title:'Car Washing & Detailing', img:'images/carwash.webp', short:'Custom upgrades & restorations', desc:'This includes exterior washing, waxing, vacuuming, interior cleaning, window polishing, and sometimes engine cleaning. Detailing keeps the car looking new, protects the paint, removes stains, and preserves the car’s value. It’s often offered as an add-on service in many garages.'}
  ];

  const modal = document.getElementById('servicesModal');
  const modalBody = document.getElementById('modalBody');
  const btnOpenNav = document.getElementById('nav-ourservices');
  const heroBtn = document.querySelector('.btn'); // optional hero button
  const btnClose = document.getElementById('modalClose');
  let expandedCard = null;

  function buildCards(){
    modalBody.innerHTML = '';
    services.forEach(s => {
      const btn = document.createElement('button');
      btn.className = 'service-card';
      btn.setAttribute('data-id', s.id);
      btn.setAttribute('aria-expanded','false');
      btn.innerHTML = `
        <div class="svc-img" style="background-image:url('${s.img}')" aria-hidden="true"></div>
        <div class="svc-content">
          <h4 class="svc-title">${s.title}</h4>
          <div class="svc-short">${s.short}</div>
          <div class="svc-desc" style="display:none">${s.desc}</div>
        </div>
      `;
      btn.addEventListener('click', () => {
        if (btn.classList.contains('expanded')) { collapseExpanded(); return; }
        expandCard(btn);
      });
      modalBody.appendChild(btn);
    });
    // spacer ensures expanded card can span full width
    const spacer = document.createElement('div');
    spacer.className = 'spacer';
    modalBody.appendChild(spacer);
  }

  function openModal(){
    buildCards();
    modal.classList.add('open');
    modal.setAttribute('aria-hidden','false');
    modalBody.focus();
    document.documentElement.style.overflow = 'hidden';
    setTimeout(()=> window.addEventListener('click', outsideClick), 120);
  }
  function closeModal(){
    collapseExpanded();
    modal.classList.remove('open');
    modal.setAttribute('aria-hidden','true');
    document.documentElement.style.overflow = '';
    window.removeEventListener('click', outsideClick);
  }
  function outsideClick(e){
    const win = modal.querySelector('.modal-window');
    if (!win.contains(e.target)) closeModal();
  }

  if (btnOpenNav) btnOpenNav.addEventListener('click', e => { e.preventDefault(); openModal(); });
  if (heroBtn) heroBtn.addEventListener('click', e => { e.preventDefault(); openModal(); });
  if (btnClose) btnClose.addEventListener('click', e => { e.preventDefault(); closeModal(); });

  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && modal.classList.contains('open')) closeModal();
    if (expandedCard && (e.key === 'ArrowLeft' || e.key === 'ArrowRight')) {
      navigateExpanded(e.key === 'ArrowRight' ? 1 : -1);
    }
  });

  function expandCard(card){
    collapseExpanded();
    expandedCard = card;
    card.classList.add('expanded');
    card.setAttribute('aria-expanded','true');
    const desc = card.querySelector('.svc-desc'); if (desc) desc.style.display = 'block';
    modalBody.appendChild(card); // allow it to span grid
    const img = card.querySelector('.svc-img'); if (img){ img.style.transition='transform .42s'; img.style.transform='scale(1.06)'; }
    setTimeout(()=> card.scrollIntoView({behavior:'smooth', block:'center'}), 60);
  }
  function collapseExpanded(){
    if (!expandedCard) return;
    expandedCard.classList.remove('expanded');
    expandedCard.setAttribute('aria-expanded','false');
    const desc = expandedCard.querySelector('.svc-desc'); if (desc) desc.style.display = 'none';
    const img = expandedCard.querySelector('.svc-img'); if (img){ img.style.transform=''; img.style.filter=''; }
    buildCards();
    expandedCard = null;
  }
  function navigateExpanded(dir){
    if (!expandedCard) return;
    const id = expandedCard.getAttribute('data-id');
    const idx = services.findIndex(s => s.id === id);
    const newIdx = (idx + dir + services.length) % services.length;
    const cards = Array.from(modalBody.querySelectorAll('.service-card'));
    const nextCard = cards.find(c => c.getAttribute('data-id') === services[newIdx].id);
    if (nextCard) expandCard(nextCard);
  }

  // preload images for smoother UX
  services.forEach(s => { const i = new Image(); i.src = s.img; });
})();

// ABOUT banner reveal on scroll
(function(){
  const aboutContainer = document.getElementById('aboutBannerContent') || document.querySelector('.about-banner-content');
  const banner = document.getElementById('banner') || document.querySelector('.banner');

  if (!aboutContainer || !banner) return;

  const obs = new IntersectionObserver((entries, o) => {
    entries.forEach(en => {
      if (en.isIntersecting) {
        aboutContainer.classList.add('visible');
        // stop observing after first reveal
        o.unobserve(en.target);
      }
    });
  }, { threshold: 0.28 });

  obs.observe(banner);
})();

// Make About heading appear when banner scrolls into view
const banner = document.getElementById('banner');
const heading = banner.querySelector('.about-heading');

window.addEventListener('scroll', () => {
  const bannerTop = banner.getBoundingClientRect().top;
  const windowHeight = window.innerHeight;

  if (bannerTop < windowHeight * 0.8) { // trigger when 80% of viewport
    banner.classList.add('in-view');
  }
});

  </script>
</body>
</html>
